{% extends 'ingest/base.html' %}
{% block content %}
{% load bootstrap4 %}
<head>
<script src="/static/ingest/updateusers.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
<script>$(document).ready(function(){$('table').find('input').on('change', function() {$(this).addClass('modified');});})</script>
</head>

<h1>Modify User Access</h1>
<p>Change user roles.</p>
<form id="rowform">
{% csrf_token %}
<table id="ModifyUserAccess" class="table">
<thead>
<tr>
<th>Username</th>
<th>Name</th>
<th>Orcid ID</th>
<th>Affiliation</th>
<th>Is Project Investigator</th>
<th>Is Program Officer</th>
<th>Is BIL Admin</th>
<th>DOI Role</th>
</tr>
</thead>
<tbody>
{% for user in allusers %}
<tr data-user_id="{{user.id}}">
<td>{{user.username}}</td>
<td>{{user.these_people.name}}</td>
<td>{{user.these_people.orcid_id}}</td>
<td>{{user.these_people.affiliation}}</td>
<td><input type="text" name="is_pi" id="is_pi" value="{{user.these_project_people.is_pi}}"></td>
<td><input type="text" name="is_po" id="is_po" value="{{user.these_project_people.is_po}}"></td>
<td><input type="text" name="is_bil_admin" id="is_bil_admin" value="{{user.these_project_people.is_bil_admin}}"></td>
<td>{{user.these_project_people.doi_role}}</td>
</tr>
{% endfor %}
</table>
</form>
<button class="btn btn-primary" onclick="submit_user_changes();">Confirm Changes</button>
<hr>

<a href="{% url 'ingest:index' %}">
  <button class="cancel btn btn btn-primary" value="ignore" formnovalidate="">Cancel</button>
</a>
{% endblock %}
