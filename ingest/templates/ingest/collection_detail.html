{% extends 'ingest/wide.html' %}

{% block wide %}

<h1><b>Collection</b> {{ collection.name }} 
  {% if collection.locked %}<i class="fa fa-lock"></i>
  {% else %}<i class="fa fa-unlock"></i>
  {% endif %}
  </h1>
  <div class="list-group">
    <a href="#" class="list-group-item"><h4 class="list-group-item-heading">Description</h4> {{collection.description}}</a>
    <a href="#" class="list-group-item"><h4 class="list-group-item-heading">Organization</h4> {{collection.organization_name}}</a>
    <a href="#" class="list-group-item"><h4 class="list-group-item-heading">Lab</h4> {{collection.lab_name}}</a>
    <a href="#" class="list-group-item"><h4 class="list-group-item-heading">Project funder</h4> {{collection.project_funder}}</a>
    <a href="#" class="list-group-item"><h4 class="list-group-item-heading">Project funder ID</h4> {{collection.project_funder_id}}</a>
    <a href="{% url 'ingest:collection_data_path' pk=collection.pk %}" class="list-group-item"><h4 class="list-group-item-heading">Data staging area</h4> {{collection.data_path}}</a>

    {% if submission_validation_status == "not_submitted" %}
    <a href="#" class="list-group-item list-group-item-info"><h4 class="list-group-item-heading">Submission & Validation Status</h4> Not submitted or validated</a>
    {% elif submission_validation_status == "pending" %}
    <a href="#" class="list-group-item list-group-item-warning"><h4 class="list-group-item-heading">Submission & Validation Status</h4> Submitted and validated pending</a>
    {% elif submission_validation_status == "success" %}
    <a href="#" class="list-group-item list-group-item-success"><h4 class="list-group-item-heading">Submission & Validation Status</h4> Submitted and validated successfully</a>
    {% elif submission_validation_status == "failure" %}
    <a href="#" class="list-group-item list-group-item-danger"><h4 class="list-group-item-heading">Submission & Validation Status</h4> Submitted and validation failed</a>
    {% endif %}

    {% if dir_size %}
    <a href="#" class="list-group-item"><h4 class="list-group-item-heading">Directory Size</h4> {{dir_size}}</a>
    {% endif %}
  </div>
  {% if image_metadata_queryset %}
    <form action="" method="post">{% csrf_token %}
      <div class="panel panel-default">
        <div class="panel-heading collapsed" data-toggle="collapse" data-target="#collapseOrderMetadata"> Metadata <i class="chevron fa fa-fw" ></i></div>
        <div class="collapse" id="collapseOrderMetadata">
          {% load render_table from django_tables2 %}
          {% render_table table %}
        </div>
      </div>


      {% if collection.locked %}
        <div class="alert alert-info">
          <strong>Submitted collections cannot be modified or deleted.</strong>
        </div>
      {% else %}
        <p>If you are done editing metadata and your data is finished uploading, hit submit at this time</p>
        <div class='btn-group btn-group-lg'>
          <input class="save btn btn-primary" type="submit" value="Submit collection"/>
          <a class="save btn btn-primary" href="{% url 'ingest:collection_update' pk=collection.pk %}">Edit Collection</a>
          <a class="save btn btn-primary" href="{% url 'ingest:collection_delete' pk=collection.pk %}">Delete Collection</a>
        </div>
      {% endif %}
    </form>
  {% else %}
    <div class='btn-group btn-group-lg'>
      <a class="save btn btn-primary" href="{% url 'ingest:collection_update' pk=collection.pk %}">Edit Collection</a>
      <a class="save btn btn-primary" href="{% url 'ingest:collection_delete' pk=collection.pk %}">Delete Collection</a>
    </div>
    </br>
    </br>
    <div class="alert alert-info">
      <strong>This collection doesn't have any metadata yet.</strong>
    </div>
  {% endif %}
</br>
<a href="{% url 'ingest:collection_list' %}">
  <button class="cancel btn btn-lg btn-primary" value="ignore" formnovalidate="">Cancel</button>
</a>

{% endblock %}
